<app-settings-drawer-host title="Reader" subtitle="Track your reading list: books, status, and ratings.">
  <ng-container main>
    <app-navigation-bar
      [items]="readerNavItems"
      [selected]="activeTab()"
      (selectedChange)="activeTab.set($any($event))" />

    @if (activeTab() === 'books') {
      <app-reader-books-table
        [initialFilter]="pendingFilter()"
        (filtersApplied)="clearPendingFilters()"
        (viewBook)="openEdit($event)"
        (addBook)="openAdd()" />
    } @else if (activeTab() === 'collections') {
      <section class="card card-table-scroll">
        <app-reader-collections (viewBook)="openEdit($event)" />
      </section>
    } @else if (activeTab() === 'stats') {
      <app-reader-stats (navigateToBooks)="navigateToBooksWithFilter($any($event))" />
    } @else {
      <section class="card card-table-scroll">
        <app-reader-timeline (viewBook)="openEdit($event)" />
      </section>
    }

    @if (panelOpen()) {
      <div class="panel-overlay" (click)="closePanel()">
        <div class="panel" (click)="$event.stopPropagation()">
          <app-book-form
            [book]="editingBook()"
            (save)="onSave($event)"
            (cancel)="closePanel()"
            (delete)="onDelete()" />
        </div>
      </div>
    }
  </ng-container>
  <ng-container settings>
    <app-reader-settings />
  </ng-container>
</app-settings-drawer-host>
