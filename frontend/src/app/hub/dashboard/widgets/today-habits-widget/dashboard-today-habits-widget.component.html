<div class="dashboard-widget dashboard-widget-today-habits">
  <h2 class="dashboard-widget-title">
    <span class="dashboard-widget-title-emoji" aria-hidden="true">✓</span>
    Today's habits
    <a routerLink="/plugins/habits" class="dashboard-widget-title-link">Habits</a>
  </h2>
  @if (habits().length === 0) {
    <p class="hint">No habits yet. <a routerLink="/plugins/habits">Add habits</a> to track daily.</p>
  } @else {
    <ul class="habit-today-list habit-today-list--vertical" aria-label="Today's habits">
      @for (habit of habits(); track habit.id) {
        <li class="habit-today-item habit-today-item--vertical">
          <button
            type="button"
            class="habit-today-circle"
            [class.habit-today-circle--checked]="isCompleted(habit.id)"
            [style.--habit-color]="habit.color ?? '#58a6ff'"
            (click)="toggle(habit)"
            [attr.aria-pressed]="isCompleted(habit.id)"
            [attr.aria-label]="habit.name + (isCompleted(habit.id) ? ': done' : ': not done')"
            [attr.title]="habit.name + ' – ' + (isCompleted(habit.id) ? 'Done (click to undo)' : 'Not done (click to mark done)')">
            @if (isCompleted(habit.id)) {
              <span class="habit-today-tick" aria-hidden="true">✓</span>
            }
          </button>
          <div class="habit-today-label-wrap">
            <span class="habit-today-icon" aria-hidden="true">{{ habit.icon || '✓' }}</span>
            <span class="habit-today-name">{{ habit.name }}</span>
          </div>
        </li>
      }
    </ul>
  }
</div>
