<app-settings-drawer-host
  title="Dashboard"
  subtitle="Your homelab hub. Add plugin apps from the sidebar.">
  <ng-container main>
    <section class="dashboard-widgets">
      @for (widget of selectedWidgets(); track widget.id) {
        <div
          class="dashboard-widget-wrapper"
          [class.dashboard-widget-wrapper--dragging]="draggedWidgetId() === widget.id"
          [class.dashboard-widget-span-3]="widget.columns === 3"
          (dragover)="onDragOver($event)"
          (drop)="onDrop(widget, $event)">
          <span
            class="dashboard-widget-drag-handle"
            draggable="true"
            (dragstart)="onDragStart(widget, $event)"
            (dragend)="onDragEnd()"
            title="Drag to reorder"
            aria-label="Drag to reorder widget">⋮⋮</span>
          <div class="dashboard-widget-slot">
            <ng-container *ngComponentOutlet="widget.component" />
          </div>
        </div>
      }
      @if (selectedWidgets().length === 0) {
        <p class="hint">No widgets selected. Open dashboard settings (⚙️) to add some.</p>
      }
    </section>
  </ng-container>
  <ng-container settings>
    <app-dashboard-settings />
  </ng-container>
</app-settings-drawer-host>
